<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PantelMed AI - –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–¥–æ—Ä–æ–≤'—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background-color: var(--tg-theme-bg-color, #1a1a1a);
            color: var(--tg-theme-text-color, #ffffff);
            line-height: 1.4;
            font-size: 16px;
        }

        .app {
            max-width: 400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        .hidden {
            display: none;
        }

        /* –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ */
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background-color: var(--tg-theme-button-color, #0088cc);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .back-button:hover {
            background-color: #0077bb;
            transform: scale(1.1);
        }

        .back-button.hidden {
            display: none;
        }

        /* –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é - –æ–Ω–æ–≤–ª–µ–Ω–µ –±—Ä–µ–Ω–¥—É–≤–∞–Ω–Ω—è */
        .app-branding {
            text-align: center;
            margin-bottom: 40px;
        }

        .app-title {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 5px;
            background: linear-gradient(45deg, #0088cc, #00aaff, #4fc3f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 4px rgba(0, 136, 204, 0.3);
        }

        .app-subtitle {
            font-size: 12px;
            color: var(--tg-theme-hint-color, #999);
            font-weight: 400;
            letter-spacing: 0.5px;
            line-height: 1.3;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .menu-item {
            background-color: var(--tg-theme-secondary-bg-color, #2d2d2d);
            padding: 20px 15px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .menu-item:hover {
            background-color: var(--tg-theme-button-color, #0088cc);
            transform: translateY(-2px);
        }

        .menu-item.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .menu-icon {
            font-size: 32px;
            display: block;
            margin-bottom: 8px;
        }

        .menu-title {
            font-size: 13px;
            font-weight: 600;
        }

        .coming-soon {
            font-size: 10px;
            color: var(--tg-theme-hint-color, #999);
            display: block;
            margin-top: 4px;
        }

        /* –§–æ—Ä–º–∞ –ø—Ä–æ—Ñ—ñ–ª—é */
        .profile-form {
            background-color: var(--tg-theme-secondary-bg-color, #2d2d2d);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--tg-theme-text-color, #ffffff);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--tg-theme-button-color, #0088cc);
            border-radius: 8px;
            background-color: var(--tg-theme-bg-color, #1a1a1a);
            color: var(--tg-theme-text-color, #ffffff);
            font-size: 16px;
        }

        /* –¢–µ—Å—Ç */
        .progress-bar {
            background-color: var(--tg-theme-secondary-bg-color, #2d2d2d);
            height: 8px;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            height: 100%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            margin-bottom: 10px;
            font-size: 14px;
            color: var(--tg-theme-hint-color, #999);
        }

        .block-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .block-title {
            font-size: 20px;
            margin-bottom: 8px;
        }

        .block-description {
            color: var(--tg-theme-hint-color, #999);
            font-size: 14px;
        }

        .question-block {
            background-color: var(--tg-theme-secondary-bg-color, #2d2d2d);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .question-counter {
            background-color: var(--tg-theme-button-color, #0088cc);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            display: inline-block;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 16px;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .answer-button {
            background-color: var(--tg-theme-bg-color, #1a1a1a);
            border: 2px solid var(--tg-theme-button-color, #0088cc);
            color: var(--tg-theme-text-color, #ffffff);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .answer-button:hover {
            background-color: var(--tg-theme-button-color, #0088cc);
        }

        .answer-button.selected {
            background-color: var(--tg-theme-button-color, #0088cc);
            border-color: #4caf50;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background-color: var(--tg-theme-bg-color, #1a1a1a);
            border-radius: 8px;
            cursor: pointer;
        }

        .checkbox-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .continue-button {
            width: 100%;
            background: linear-gradient(45deg, #4caf50, #45a049);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .continue-button:hover {
            transform: translateY(-2px);
        }

        .continue-button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .secondary-button {
            background-color: var(--tg-theme-secondary-bg-color, #2d2d2d);
            color: var(--tg-theme-text-color, #ffffff);
            border: 1px solid var(--tg-theme-button-color, #0088cc);
        }

        .back-to-menu {
            width: 100%;
            background-color: var(--tg-theme-secondary-bg-color, #2d2d2d);
            color: var(--tg-theme-text-color, #ffffff);
            border: 1px solid var(--tg-theme-button-color, #0088cc);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
        }

        /* –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ */
        .results-container {
            margin-bottom: 30px;
        }

        .user-info {
            background-color: var(--tg-theme-secondary-bg-color, #2d2d2d);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }

        .result-item {
            background-color: var(--tg-theme-secondary-bg-color, #2d2d2d);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .result-name {
            font-weight: 600;
        }

        .result-percentage {
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .result-percentage.good {
            background-color: #4caf50;
            color: white;
        }

        .result-percentage.warning {
            background-color: #ff9800;
            color: white;
        }

        .result-percentage.danger {
            background-color: #f44336;
            color: white;
        }

        .score-bar-small {
            background-color: var(--tg-theme-bg-color, #1a1a1a);
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .score-fill.good {
            background-color: #4caf50;
        }

        .score-fill.warning {
            background-color: #ff9800;
        }

        .score-fill.danger {
            background-color: #f44336;
        }

        /* Selling texts */
        .selling-text {
            background-color: var(--tg-theme-bg-color, #1a1a1a);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #ff6b6b;
        }

        .selling-text h5 {
            color: #ff6b6b;
            margin: 0 0 10px 0;
            font-size: 14px;
        }

        .selling-text p {
            margin: 0 0 10px 0;
            font-size: 13px;
            line-height: 1.4;
            color: var(--tg-theme-text-color, #ffffff);
        }

        .basic-practices {
            margin: 10px 0;
        }

        .basic-practices strong {
            display: block;
            margin-bottom: 5px;
            color: var(--tg-theme-text-color, #ffffff);
            font-size: 12px;
        }

        .basic-practices ul {
            margin: 0;
            padding-left: 15px;
            color: var(--tg-theme-hint-color, #999);
        }

        .basic-practices li {
            margin-bottom: 3px;
            font-size: 12px;
        }

        .upgrade-cta {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
        }

        .upgrade-cta p {
            color: white;
            margin: 0 0 10px 0;
            font-size: 14px;
        }

        .upgrade-cta-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Processing animation */
        .processing-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .processing-overlay.visible {
            opacity: 1;
        }

        .processing-card {
            background-color: var(--tg-theme-secondary-bg-color, #2d2d2d);
            padding: 30px;
            border-radius: 16px;
            text-align: center;
            max-width: 300px;
        }

        .processing-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--tg-theme-button-color, #0088cc);
            border-top: 4px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .processing-text {
            font-size: 16px;
            margin-bottom: 15px;
            color: var(--tg-theme-text-color, #ffffff);
        }

        .processing-dots {
            display: flex;
            justify-content: center;
            gap: 5px;
        }

        .processing-dots span {
            width: 8px;
            height: 8px;
            background-color: var(--tg-theme-button-color, #0088cc);
            border-radius: 50%;
            animation: bounce 1.4s ease-in-out infinite both;
        }

        .processing-dots span:nth-child(1) { animation-delay: -0.32s; }
        .processing-dots span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes bounce {
            0%, 80%, 100% { 
                transform: scale(0);
            } 40% { 
                transform: scale(1);
            }
        }

        /* –§–∞—Ä–º–∞–∫–æ–ª–æ–≥—ñ—è */
        .pharma-section {
            padding: 20px 0;
        }

        .pharma-warning {
            background-color: rgba(244, 67, 54, 0.1);
            border: 1px solid #f44336;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .pharma-warning h3 {
            margin: 0 0 10px 0;
            color: #f44336;
        }

        .pharma-warning p {
            margin: 0;
            color: var(--tg-theme-text-color, #ffffff);
            font-size: 14px;
        }

        .course-card {
            background-color: var(--tg-theme-secondary-bg-color, #2d2d2d);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #ff9800;
            margin-bottom: 15px;
        }

        .course-card h4 {
            color: #ff9800;
            margin-bottom: 10px;
        }

        .course-card ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .course-card li {
            margin-bottom: 5px;
            font-size: 14px;
        }

        .course-price {
            font-weight: bold;
            color: #4caf50;
            font-size: 18px;
        }

        /* Questionnaire */
        .questionnaire-option {
            background-color: var(--tg-theme-bg-color, #1a1a1a);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .questionnaire-option:hover {
            background-color: var(--tg-theme-button-color, #0088cc);
        }

        .questionnaire-option.selected {
            background-color: var(--tg-theme-button-color, #0088cc);
            border-color: #4caf50;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .app {
                padding: 10px;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .back-button {
                top: 10px;
                left: 10px;
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
        <button id="backButton" class="back-button hidden" onclick="goBack()">
            ‚Üê
        </button>

        <!-- –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é -->
        <div id="menu-screen" class="screen">
            <div class="app-branding">
                <h1 class="app-title">PantelMed AI</h1>
                <p class="app-subtitle">Medical Diagnostic and Preventive Platform on Telegram</p>
            </div>

            <div class="menu-grid">
                <div class="menu-item" onclick="handleMenuClick('test')">
                    <span class="menu-icon">üß¨</span>
                    <span class="menu-title">–¢–µ—Å—Ç –æ—Ü—ñ–Ω–∫–∞ —Å–∏—Å—Ç–µ–º –∑–¥–æ—Ä–æ–≤'—è</span>
                </div>

                <div class="menu-item" onclick="handleMenuClick('cabinet')">
                    <span class="menu-icon">üë§</span>
                    <span class="menu-title">–ú—ñ–π –∫–∞–±—ñ–Ω–µ—Ç</span>
                </div>

                <div class="menu-item" onclick="handleMenuClick('diet')">
                    <span class="menu-icon">ü•ó</span>
                    <span class="menu-title">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞ –¥—ñ—î—Ç–∞</span>
                </div>

                <div class="menu-item" onclick="handleMenuClick('pharma')">
                    <span class="menu-icon">üíäüíâ</span>
                    <span class="menu-title">–§–∞—Ä–º–∞</span>
                </div>

                <div class="menu-item" onclick="handleMenuClick('consultation')">
                    <span class="menu-icon">üë®‚Äç‚öïÔ∏è</span>
                    <span class="menu-title">–ó–∞–ø–∏—Å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é</span>
                </div>

                <div class="menu-item disabled">
                    <span class="menu-icon">üìä</span>
                    <span class="menu-title">–Ü–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è –∞–Ω–∞–ª—ñ–∑—ñ–≤</span>
                    <span class="coming-soon">–°–∫–æ—Ä–æ</span>
                </div>
            </div>
        </div>

        <!-- –ï–∫—Ä–∞–Ω –ø—Ä–æ—Ñ—ñ–ª—é -->
        <div id="profile-screen" class="screen hidden">
            <div class="block-header">
                <h2>üë§ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ</h2>
                <p>–î–ª—è —Ç–æ—á–Ω–æ—ó –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –≤–∞—à—ñ –¥–∞–Ω—ñ</p>
            </div>

            <div class="profile-form">
                <div class="form-group">
                    <label for="userName">–Ü–º'—è:</label>
                    <input type="text" id="userName" placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ —ñ–º'—è">
                </div>

                <div class="form-group">
                    <label for="userAge">–í—ñ–∫:</label>
                    <select id="userAge">
                        <option value="">–û–±–µ—Ä—ñ—Ç—å –≤—ñ–∫</option>
                        <option value="18-25">18-25 —Ä–æ–∫—ñ–≤</option>
                        <option value="26-35">26-35 —Ä–æ–∫—ñ–≤</option>
                        <option value="36-45">36-45 —Ä–æ–∫—ñ–≤</option>
                        <option value="46-55">46-55 —Ä–æ–∫—ñ–≤</option>
                        <option value="56+">56+ —Ä–æ–∫—ñ–≤</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="userGender">–°—Ç–∞—Ç—å:</label>
                    <select id="userGender">
                        <option value="">–û–±–µ—Ä—ñ—Ç—å —Å—Ç–∞—Ç—å</option>
                        <option value="male">–ß–æ–ª–æ–≤—ñ–∫</option>
                        <option value="female">–ñ—ñ–Ω–∫–∞</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="userBodyType">–°—Ç–∞—Ç—É—Ä–∞:</label>
                    <select id="userBodyType">
                        <option value="">–û–±–µ—Ä—ñ—Ç—å —Å—Ç–∞—Ç—É—Ä—É</option>
                        <option value="thin">–•—É–¥–∞</option>
                        <option value="normal">–ù–æ—Ä–º–∞–ª—å–Ω–∞</option>
                        <option value="athletic">–°–ø–æ—Ä—Ç–∏–≤–Ω–∞</option>
                        <option value="overweight">–ü–æ–≤–Ω–∞</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="userHeight">–ó—Ä—ñ—Å—Ç (—Å–º):</label>
                    <input type="number" id="userHeight" placeholder="170" min="100" max="250">
                </div>

                <div class="form-group">
                    <label for="userWeight">–í–∞–≥–∞ (–∫–≥):</label>
                    <input type="number" id="userWeight" placeholder="70" min="30" max="200">
                </div>
            </div>

            <button class="continue-button" onclick="startTestQuestions()" disabled>
                –ü–æ—á–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è üöÄ
            </button>
        </div>

        <!-- –ï–∫—Ä–∞–Ω —Ç–µ—Å—Ç—É -->
        <div id="test-screen" class="screen hidden">
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
            <div id="progressText" class="progress-text"></div>

            <div class="block-header">
                <h2 id="blockTitle"></h2>
                <p id="blockDescription"></p>
            </div>

            <div id="questionsContainer"></div>

            <button id="nextButton" class="continue-button" onclick="nextBlockWithProcessing()" disabled>
                –î–∞–ª—ñ ‚û°Ô∏è
            </button>
        </div>

        <!-- –ï–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
        <div id="results-screen" class="screen hidden">
            <div class="block-header">
                <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</h2>
            </div>

            <div id="userInfoResults" class="user-info"></div>
            <div id="allResults" class="results-container"></div>

            <button onclick="backToMenu()" class="back-to-menu">
                üè† –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –º–µ–Ω—é
            </button>
        </div>
    </div>

    <script>
        // Telegram WebApp —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.expand();
            tg.ready();
        }

        // –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
        let currentScreen = 'menu';
        let currentBlock = 0;
        let answers = {};
        let userProfile = {};
        let userTestResults = null;
        let testCompletionDate = null;
        let navigationHistory = [];

        // –ë–ª–æ–∫–∏ –∑–¥–æ—Ä–æ–≤'—è
        const healthBlocks = {
            serotonin: {
                name: '–°–µ—Ä–æ—Ç–æ–Ω—ñ–Ω',
                emoji: 'üòå',
                title: 'üòå –°–ï–†–û–¢–û–ù–Ü–ù - –≥–æ—Ä–º–æ–Ω —â–∞—Å—Ç—è',
                description: '—Ä—ñ–≤–µ–Ω—å —Å–µ—Ä–æ—Ç–æ–Ω—ñ–Ω—É –≤–ø–ª–∏–≤–∞—î –Ω–∞ –Ω–∞—Å—Ç—Ä—ñ–π, —Å–æ–Ω —Ç–∞ –∑–∞–≥–∞–ª—å–Ω–µ —Å–∞–º–æ–ø–æ—á—É—Ç—Ç—è',
                type: 'neurotransmitter',
                questions: [
                    { id: 'ser_1', text: '–ß–∏ —á–∞—Å—Ç–æ –≤—ñ–¥—á—É–≤–∞—î—Ç–µ –ø—Ä–∏–≥–Ω—ñ—á–µ–Ω—ñ—Å—Ç—å –∞–±–æ —Å—É–º –±–µ–∑ –≤–∏–¥–∏–º–∏—Ö –ø—Ä–∏—á–∏–Ω?' },
                    { id: 'ser_2', text: '–ß–∏ –≤–∞–∂–∫–æ –≤–∞–º –∑–∞—Å–Ω—É—Ç–∏ –∞–±–æ –≤–∏ –ø—Ä–æ–∫–∏–¥–∞—î—Ç–µ—Å—å –≤–Ω–æ—á—ñ?' },
                    { id: 'ser_3', text: '–ß–∏ –≤—ñ–¥—á—É–≤–∞—î—Ç–µ —Ç—Ä–∏–≤–æ–≥—É –≤ –ø–æ–≤—Å—è–∫–¥–µ–Ω–Ω–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ—è—Ö?' },
                    { id: 'ser_4', text: '–ß–∏ –º–∞—î—Ç–µ —Å–∏–ª—å–Ω—É —Ç—è–≥—É –¥–æ —Å–æ–ª–æ–¥–∫–æ–≥–æ –∞–±–æ –≤—É–≥–ª–µ–≤–æ–¥—ñ–≤?' },
                    { id: 'ser_5', text: '–ß–∏ –≤—Ç—Ä–∞—Ç–∏–ª–∏ —ñ–Ω—Ç–µ—Ä–µ—Å –¥–æ –∑–∞–Ω—è—Ç—å, —è–∫—ñ —Ä–∞–Ω—ñ—à–µ –ø—Ä–∏–Ω–æ—Å–∏–ª–∏ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è?' }
                ]
            },
            dopamine: {
                name: '–î–æ—Ñ–∞–º—ñ–Ω',
                emoji: 'üéØ',
                title: 'üéØ –î–û–§–ê–ú–Ü–ù - –º–æ—Ç–∏–≤–∞—Ü—ñ—è —Ç–∞ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∞',
                description: '–¥–æ—Ñ–∞–º—ñ–Ω –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –º–æ—Ç–∏–≤–∞—Ü—ñ—é, –µ–Ω–µ—Ä–≥—ñ—é —Ç–∞ –≤—ñ–¥—á—É—Ç—Ç—è –∑–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è',
                type: 'neurotransmitter',
                questions: [
                    { id: 'dop_1', text: '–ß–∏ –≤—ñ–¥—á—É–≤–∞—î—Ç–µ –±—Ä–∞–∫ –º–æ—Ç–∏–≤–∞—Ü—ñ—ó –∞–±–æ –µ–Ω–µ—Ä–≥—ñ—ó –¥–ª—è –ø–æ–≤—Å—è–∫–¥–µ–Ω–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å?' },
                    { id: 'dop_2', text: '–ß–∏ –≤–∞–∂–∫–æ –≤–∞–º –∑–æ—Å–µ—Ä–µ–¥–∏—Ç–∏—Å—è –Ω–∞ —Ä–æ–±–æ—Ç—ñ –∞–±–æ –Ω–∞–≤—á–∞–Ω–Ω—ñ?' },
                    { id: 'dop_3', text: '–ß–∏ —à—É–∫–∞—î—Ç–µ –ø–æ—Å—Ç—ñ–π–Ω—É —Å—Ç–∏–º—É–ª—è—Ü—ñ—é (—Å–æ—Ü–º–µ—Ä–µ–∂—ñ, –≤—ñ–¥–µ–æ, —ó–∂–∞)?' },
                    { id: 'dop_4', text: '–ß–∏ –≤—ñ–¥—á—É–≤–∞—î—Ç–µ, —â–æ –≤—Ç—Ä–∞—Ç–∏–ª–∏ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å —Ä–∞–¥—ñ—Ç–∏ –ø—Ä–æ—Å—Ç–∏–º —Ä–µ—á–∞–º?' },
                    { id: 'dop_5', text: '–ß–∏ —á–∞—Å—Ç–æ –≤—ñ–¥–∫–ª–∞–¥–∞—î—Ç–µ –≤–∞–∂–ª–∏–≤—ñ —Å–ø—Ä–∞–≤–∏ –Ω–∞ –ø–æ—Ç—ñ–º?' }
                ]
            },
            digestive_system: {
                name: '–®–ª—É–Ω–∫–æ–≤–æ-–∫–∏—à–∫–æ–≤–∏–π —Ç—Ä–∞–∫—Ç',
                emoji: 'üçΩÔ∏è',
                title: 'üçΩÔ∏è –®–ö–¢ - "–¥—Ä—É–≥–∏–π –º–æ–∑–æ–∫"',
                description: '—à–ª—É–Ω–∫–æ–≤–æ-–∫–∏—à–∫–æ–≤–∏–π —Ç—Ä–∞–∫—Ç –≤–∏—Ä–æ–±–ª—è—î 80% —Å–µ—Ä–æ—Ç–æ–Ω—ñ–Ω—É',
                type: 'system',
                questions: [
                    { id: 'dig_1', text: '–ß–∏ –º–∞—î—Ç–µ –ø—Ä–æ–±–ª–µ–º–∏ –∑ —Ç—Ä–∞–≤–ª–µ–Ω–Ω—è–º (–∑–¥—É—Ç—Ç—è, –≥–∞–∑–∏, –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç)?' },
                    { id: 'dig_2', text: '–ß–∏ –Ω–µ—Ä–µ–≥—É–ª—è—Ä–Ω–∏–π —Å—Ç—ñ–ª–µ—Ü—å (–∑–∞–ø–æ—Ä–∏ –∞–±–æ –¥—ñ–∞—Ä–µ—è)?' },
                    { id: 'dig_3', text: '–ß–∏ –≤—ñ–¥—á—É–≤–∞—î—Ç–µ –ø–µ—á—ñ—é –∞–±–æ –∫–∏—Å–ª–æ—Ç–Ω—ñ—Å—Ç—å?' },
                    { id: 'dig_4', text: '–ß–∏ –º–∞—î—Ç–µ –ø–∏—â–µ–≤–æ—é –Ω–µ–ø–µ—Ä–µ–Ω–æ—Å–∏–º—ñ—Å—Ç—å –∞–±–æ –∞–ª–µ—Ä–≥—ñ—ó?' },
                    { id: 'dig_5', text: '–ß–∏ —á–∞—Å—Ç–æ –ø—Ä–∏–π–º–∞–ª–∏ –∞–Ω—Ç–∏–±—ñ–æ—Ç–∏–∫–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–º —á–∞—Å–æ–º?' }
                ]
            },
            rectal_parasites: {
                name: '–ó–∞–¥–Ω—ñ–π –ø—Ä–æ—Ö—ñ–¥ —Ç–∞ –≥–µ–ª—å–º—ñ–Ω—Ç–∏',
                emoji: 'üßª',
                title: 'üßª –ó–ê–î–ù–Ü–ô –ü–†–û–•–Ü–î –¢–ê –ì–ï–õ–¨–ú–Ü–ù–¢–ò - —ñ–Ω—Ç–∏–º–Ω–µ –∑–¥–æ—Ä–æ–≤\'—è',
                description: '—Å—Ç–∞–Ω –∑–∞–¥–Ω—å–æ–≥–æ –ø—Ä–æ—Ö–æ–¥—É —Ç–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø–∞—Ä–∞–∑–∏—Ç—ñ–≤ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –∑–∞–≥–∞–ª—å–Ω–µ –∑–¥–æ—Ä–æ–≤\'—è',
                type: 'medical',
                questions: [
                    { 
                        id: 'rec_1', 
                        text: '–ß–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç–µ –≤–∏ —á–∞—Å —ñ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º —É —Ä—É–∫–∞—Ö, —Å–∏–¥—è—á–∏ –≤ —Ç—É–∞–ª–µ—Ç—ñ?',
                        type: 'multiple_choice',
                        options: [
                            { text: '–¢–∞–∫', score: 0 },
                            { text: '–Ü–Ω–∫–æ–ª–∏', score: 1 },
                            { text: '–ù—ñ', score: 2 }
                        ]
                    },
                    { 
                        id: 'rec_2', 
                        text: '–ß–∏ –¥–æ–≤–æ–¥–∏—Ç—å—Å—è –≤–∞–º —Ç—É–∂–∏—Ç–∏—Å—å –ø–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º –¥–µ—Ñ–µ–∫–∞—Ü—ñ—ó?',
                        type: 'multiple_choice',
                        options: [
                            { text: '–ß–∞—Å—Ç–æ', score: 0 },
                            { text: '–Ü–Ω–∫–æ–ª–∏', score: 1 },
                            { text: '–ù—ñ', score: 2 }
                        ]
                    },
                    { id: 'rec_3', text: '–ß–∏ –≤—ñ–¥—á—É–≤–∞—î—Ç–µ –≤–∏ –±—ñ–ª—å —É –¥—ñ–ª—è–Ω—Ü—ñ –∑–∞–¥–Ω—å–æ–≥–æ –ø—Ä–æ—Ö–æ–¥—É —É –∑–≤–∏—á–∞–π–Ω–æ–º—É –∂–∏—Ç—Ç—ñ –∞–±–æ –ø—Ä–∏ —Ö–æ–¥—å–±—ñ?' },
                    { id: 'rec_4', text: '–ß–∏ —î —É –≤–∞—Å –±—ñ–ª—å –ø—ñ–¥ —á–∞—Å –∞–±–æ –ø—ñ—Å–ª—è –¥–µ—Ñ–µ–∫–∞—Ü—ñ—ó?' },
                    { id: 'rec_5', text: '–ß–∏ –º–∞—î—Ç–µ –≤–∏ –¥–æ–º–∞—à–Ω—ñ—Ö —Ç–≤–∞—Ä–∏–Ω?' },
                    { id: 'rec_6', text: '–ß–∏ –∫–æ–Ω—Ç–∞–∫—Ç—É—î—Ç–µ –∑ –≤—É–ª–∏—á–Ω–∏–º–∏ —Ç–≤–∞—Ä–∏–Ω–∞–º–∏ (–≥–ª–∞–¥–∏—Ç–µ, –ø—ñ–¥–≥–æ–¥–æ–≤—É—î—Ç–µ)?' },
                    { id: 'rec_7', text: '–ß–∏ –º–∏—î—Ç–µ –≤–∏ –æ–≤–æ—á—ñ —Ç–∞ —Ñ—Ä—É–∫—Ç–∏ –ø–µ—Ä–µ–¥ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è–º?' },
                    { id: 'rec_8', text: '–ß–∏ –ø—Ä–æ—Ç–∏—Ä–∞—î—Ç–µ –≤–∏ —Å–≤—ñ–π —Ç–µ–ª–µ—Ñ–æ–Ω –∞–Ω—Ç–∏—Å–µ–ø—Ç–∏–∫–æ–º –∞–±–æ –≤–æ–ª–æ–≥–∏–º–∏ —Å–µ—Ä–≤–µ—Ç–∫–∞–º–∏ —Ö–æ—á–∞ –± —Ä–∞–∑ –Ω–∞ –¥–æ–±—É?' }
                ]
            },
            activity: {
                name: '–†—ñ–≤–µ–Ω—å —â–æ–¥–µ–Ω–Ω–æ—ó –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ',
                emoji: 'üö∂‚Äç‚ôÇÔ∏è',
                title: 'üö∂‚Äç‚ôÇÔ∏è –ê–ö–¢–ò–í–ù–Ü–°–¢–¨ - —Ä—É—Ö —Ü–µ –∂–∏—Ç—Ç—è',
                description: '—Ñ—ñ–∑–∏—á–Ω–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –≤–ø–ª–∏–≤–∞—î –Ω–∞ –≤—Å—ñ —Å–∏—Å—Ç–µ–º–∏ –æ—Ä–≥–∞–Ω—ñ–∑–º—É',
                type: 'lifestyle',
                questions: [
                    { 
                        id: 'act_1', 
                        text: '–°–∫—ñ–ª—å–∫–∏ –≤–∏ –∑–∞–∑–≤–∏—á–∞–π –ø—Ä–æ—Ö–æ–¥–∏—Ç–µ –∫—Ä–æ–∫—ñ–≤ –Ω–∞ –¥–µ–Ω—å?',
                        type: 'multiple_choice',
                        options: [
                            { text: '–ú–µ–Ω—à–µ 1 000 –∫—Ä–æ–∫—ñ–≤ (—Å–∏–¥—è—á–∏–π —Å–ø–æ—Å—ñ–± –∂–∏—Ç—Ç—è)', score: 0 },
                            { text: '–í—ñ–¥ 1 000 –¥–æ 5 000 –∫—Ä–æ–∫—ñ–≤ (–ª–µ–≥–∫–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å)', score: 1 },
                            { text: '–í—ñ–¥ 5 000 –¥–æ 10 000 —ñ –±—ñ–ª—å—à–µ (–∞–∫—Ç–∏–≤–Ω–∏–π —Å–ø–æ—Å—ñ–± –∂–∏—Ç—Ç—è)', score: 2 }
                        ]
                    },
                    { 
                        id: 'act_2', 
                        text: '–°–∫—ñ–ª—å–∫–∏ –≥–æ–¥–∏–Ω –Ω–∞ –¥–µ–Ω—å –≤–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç–µ –≤ —Å–∏–¥—è—á–æ–º—É –ø–æ–ª–æ–∂–µ–Ω–Ω—ñ?',
                        type: 'multiple_choice',
                        options: [
                            { text: '2-4 –≥–æ–¥–∏–Ω–∏ (–Ω–æ—Ä–º–∞)', score: 2 },
                            { text: '5-7 –≥–æ–¥–∏–Ω (—Å–µ—Ä–µ–¥–Ω—å–æ)', score: 1 },
                            { text: '8+ –≥–æ–¥–∏–Ω (–∫—Ä–∏—Ç–∏—á–Ω–æ)', score: 0 }
                        ]
                    },
                    { id: 'act_3', text: '–ß–∏ –∑–∞–π–º–∞—î—Ç–µ—Å—å –≤–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–∏–º–∏ —Ñ—ñ–∑–∏—á–Ω–∏–º–∏ –≤–ø—Ä–∞–≤–∞–º–∏?' },
                    { id: 'act_4', text: '–ß–∏ –≤—ñ–¥—á—É–≤–∞—î—Ç–µ –≤–∏ –∑–∞–¥–∏—à–∫—É –ø—Ä–∏ –ø—ñ–¥–π–æ–º—ñ –Ω–∞ 2-3 –ø–æ–≤–µ—Ä—Ö?' },
                    { id: 'act_5', text: '–ß–∏ –∫–æ—Ä–∏—Å—Ç—É—î—Ç–µ—Å—å –≤–∏ –ª—ñ—Ñ—Ç–æ–º –∑–∞–º—ñ—Å—Ç—å —Å—Ö–æ–¥—ñ–≤?' }
                ]
            },
            nutrition: {
                name: '–ë–∞–∑–æ–≤–µ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è',
                emoji: 'üçé',
                title: 'üçé –•–ê–†–ß–£–í–ê–ù–ù–Ø - –æ—Å–Ω–æ–≤–∞ –∑–¥–æ—Ä–æ–≤\'—è',
                description: '—è–∫—ñ—Å—Ç—å —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è –≤–∏–∑–Ω–∞—á–∞—î –µ–Ω–µ—Ä–≥—ñ—é, –Ω–∞—Å—Ç—Ä—ñ–π —Ç–∞ –¥–æ–≤–≥–æ–ª—ñ—Ç—Ç—è',
                type: 'lifestyle',
                questions: [
                    { 
                        id: 'nut_1', 
                        text: '–Ø–∫ —á–∞—Å—Ç–æ –≤–∏ —Å–ø–æ–∂–∏–≤–∞—î—Ç–µ –±—ñ–ª–æ–∫ (–º\'—è—Å–æ, —è–π—Ü—è, –º–æ–ª–æ—á–∫–∞, —Ä–∏–±–∞)?',
                        type: 'multiple_choice',
                        options: [
                            { text: '–î–µ–∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤ –Ω–∞ –¥–µ–Ω—å (–º\'—è—Å–æ, —è–π—Ü—è, –º–æ–ª–æ—á–∫–∞, —Ä–∏–±–∞)', score: 2 },
                            { text: '1 —Ä–∞–∑ –Ω–∞ –¥–µ–Ω—å', score: 1 },
                            { text: '–†—ñ–¥–∫–æ (–º–µ–Ω—à–µ 4 —Ä–∞–∑—ñ–≤ –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å)', score: 0 }
                        ]
                    },
                    { 
                        id: 'nut_3', 
                        text: '–Ø–∫ —á–∞—Å—Ç–æ –≤–∏ —ó—Å—Ç–µ —Å–æ–ª–æ–¥–∫–µ / –¥–æ–¥–∞–Ω–∏–π —Ü—É–∫–æ—Ä (–ø–µ—á–∏–≤–æ, —Ü—É–∫–µ—Ä–∫–∏, –¥–µ—Å–µ—Ä—Ç–∏)?',
                        type: 'multiple_choice',
                        options: [
                            { text: '–ù–µ —ó–º', score: 2 },
                            { text: '–Ü–Ω–∫–æ–ª–∏', score: 1 },
                            { text: '–©–æ–¥–Ω—è / –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤ –Ω–∞ –¥–µ–Ω—å', score: 0 }
                        ]
                    }
                ]
            },
            chronic: {
                name: '–•—Ä–æ–Ω—ñ—á–Ω—ñ —Ö–≤–æ—Ä–æ–±–∏',
                emoji: 'üè•',
                title: 'üè• –•–†–û–ù–Ü–ß–ù–Ü –ó–ê–•–í–û–†–Æ–í–ê–ù–ù–Ø - –≤–ø–ª–∏–≤ –Ω–∞ –∑–∞–≥–∞–ª—å–Ω–µ –∑–¥–æ—Ä–æ–≤\'—è',
                description: '–Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ö—Ä–æ–Ω—ñ—á–Ω–∏—Ö –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω—å –≤–ø–ª–∏–≤–∞—î –Ω–∞ –≤—Å—ñ —Å–∏—Å—Ç–µ–º–∏ –æ—Ä–≥–∞–Ω—ñ–∑–º—É',
                type: 'medical',
                questions: [
                    { 
                        id: 'chr_1', 
                        text: '–ß–∏ —î —É –≤–∞—Å –¥—ñ–∞–≥–Ω–æ—Å—Ç–æ–≤–∞–Ω—ñ —Ö—Ä–æ–Ω—ñ—á–Ω—ñ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è?',
                        type: 'multiple_select',
                        options: [
                            { text: '–ü—Ä–æ—Å—Ç–∞—Ç–∏—Ç / –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ø—Ä–æ—Å—Ç–∞—Ç–æ—é', value: 'prostatitis' },
                            { text: '–•—Ä–æ–Ω—ñ—á–Ω–∏–π —Ç–æ–Ω–∑–∏–ª—ñ—Ç / —á–∞—Å—Ç—ñ –∞–Ω–≥—ñ–Ω–∏', value: 'tonsillitis' },
                            { text: '–•—Ä–æ–Ω—ñ—á–Ω—ñ —É—Ç—Ä—É–¥–Ω–µ–Ω–Ω—è –¥–∏—Ö–∞–Ω–Ω—è / –∞—Å—Ç–º–∞', value: 'breathing' },
                            { text: '–ì—Ä–∏–∂—ñ, –ø—Ä–æ—Ç—Ä—É–∑—ñ—ó —Ö—Ä–µ–±—Ç–∞', value: 'spine' },
                            { text: '–ê—Ä—Ç—Ä–∏—Ç–∏, –∞—Ä—Ç—Ä–æ–∑–∏ —Å—É–≥–ª–æ–±—ñ–≤', value: 'joints' },
                            { text: '–ü–µ—á—ñ–Ω–∫–∞ (–≥–µ–ø–∞—Ç–æ–∑, –≥–µ–ø–∞—Ç–∏—Ç, —Å–∏–Ω–¥—Ä–æ–º –ñ—ñ–ª—å–±–µ—Ä–∞)', value: 'liver' },
                            { text: '–ù–∏—Ä–∫–∏ / —Å–µ—á–æ–≤–∏–¥—ñ–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ (—Ü–∏—Å—Ç–∏—Ç, –ø—ñ—î–ª–æ–Ω–µ—Ñ—Ä–∏—Ç)', value: 'kidneys' },
                            { text: '–°–µ—Ä—Ü–µ–≤–æ-—Å—É–¥–∏–Ω–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ (–≥—ñ–ø–µ—Ä—Ç–æ–Ω—ñ—è, –∞—Ä–∏—Ç–º—ñ—è, —ñ—à–µ–º—ñ—è)', value: 'cardio' },
                            { text: '–ê—É—Ç–æ—ñ–º—É–Ω–Ω—ñ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è (—Ç–∏—Ä–µ–æ—ó–¥–∏—Ç, –ø—Å–æ—Ä—ñ–∞–∑)', value: 'autoimmune' },
                            { text: '–®–ö–¢ (—Ö—Ä–æ–Ω—ñ—á–Ω–∏–π –≥–∞—Å—Ç—Ä–∏—Ç, –∫–æ–ª—ñ—Ç, –•–µ–ª—ñ–∫–æ–±–∞–∫—Ç–µ—Ä)', value: 'git' },
                            { text: '–ù–µ–º–∞—î —Ö—Ä–æ–Ω—ñ—á–Ω–∏—Ö –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω—å', value: 'none' }
                        ]
                    }
                ]
            }
        };

        // –ü—Ä–æ–¥–∞—é—â—ñ —Ç–µ–∫—Å—Ç–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º
        const systemSellingTexts = {
            serotonin: {
                title: "üòå –°–µ—Ä–æ—Ç–æ–Ω—ñ–Ω - —Ç–≤–æ—î —â–∞—Å—Ç—è –ø—ñ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º",
                text: "–°–µ—Ä–æ—Ç–æ–Ω—ñ–Ω –¥–∞—î –Ω–∞–º –∑–≤–∏—á–∞–π–Ω–∏–π —Ä—ñ–≤–µ–Ω—å —Ä–∞–¥–æ—Å—Ç—ñ, –≤–ø–ª–∏–≤–∞—î –Ω–∞ –º–µ–Ω—Ç–∞–ª—å–Ω–µ —Å–∞–º–æ–ø–æ—á—É—Ç—Ç—è, —â–∞—Å—Ç—è —ñ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è –≤—ñ–¥ –∂–∏—Ç—Ç—è. –ù–µ –∫—Ä–∞–¥–∏ –≤ —Å–µ–±–µ —â–∞—Å—Ç—è! –ü—Ä–∏ –Ω–∏–∑—å–∫–æ–º—É —Å–µ—Ä–æ—Ç–æ–Ω—ñ–Ω—ñ —à–≤–∏–¥–∫–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∞–∫—Ç –µ—è–∫—É–ª—è—Ü—ñ—ó –ø—ñ–¥ —á–∞—Å —Å–µ–∫—Å—É.",
                practices: ["–ù–µ —á–∏—Ç–∞–π –ø–æ–≥–∞–Ω—ñ –Ω–æ–≤–∏–Ω–∏", "–ë—ñ–ª—å—à–µ —Å–æ–Ω—Ü—è —Ç–∞ –≤—ñ—Ç–∞–º—ñ–Ω—É D3", "–¢—Ä–∏–ø—Ç–æ—Ñ–∞–Ω –∑ —ó–∂—ñ", "–ú–µ–¥–∏—Ç–∞—Ü—ñ—è —Ç–∞ –≤–¥—è—á–Ω—ñ—Å—Ç—å"]
            },
            dopamine: {
                title: "üéØ –î–æ—Ñ–∞–º—ñ–Ω - —Ç–≤—ñ–π –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –¥–≤–∏–≥—É–Ω",
                text: "–î–æ—Ñ–∞–º—ñ–Ω - —Ü–µ —Ç–µ, —â–æ –Ω–∞—Å –∑–∞–ø–∞–ª—é—î! –í—ñ–Ω –ø–æ–Ω–∏–∂–∞—î –ø—Ä–æ–ª–∞–∫—Ç–∏–Ω, –ø—ñ–¥–≤–∏—â—É—î —Å–µ–∫—Å—É–∞–ª—å–Ω–µ –±–∞–∂–∞–Ω–Ω—è. –£—Å–ø—ñ—Ö –≤ –∂–∏—Ç—Ç—ñ –Ω–∞–ø—Ä—è–º—É –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ä—ñ–≤–Ω—è –¥–æ—Ñ–∞–º—ñ–Ω—É.",
                practices: ["–°—Ç–∞–≤–∏—Ç–∏ —Ç–∞ –¥–æ—Å—è–≥–∞—Ç–∏ –º–∞–ª–µ–Ω—å–∫—ñ —Ü—ñ–ª—ñ", "–ó–∞–π–º–∞—Ç–∏—Å—å —Å–ø–æ—Ä—Ç–æ–º", "–û–±–º–µ–∂–∏—Ç–∏ —à–≤–∏–¥–∫—ñ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è", "–ó–¥–æ—Ä–æ–≤–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü—ñ—è"]
            },
            digestive_system: {
                title: "üçΩÔ∏è –®–ö–¢ - —Ç–≤—ñ–π –¥—Ä—É–≥–∏–π –º–æ–∑–æ–∫",
                text: "80% —Å–µ—Ä–æ—Ç–æ–Ω—ñ–Ω—É –≤–∏—Ä–æ–±–ª—è—î—Ç—å—Å—è –≤ –∫–∏—à–µ—á–Ω–∏–∫—É! –®–ö–¢ - —Ü–µ –Ω–∞—à –¥—Ä—É–≥–∏–π –º–æ–∑–æ–∫, —è–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—é—î –Ω–∞—Å—Ç—Ä—ñ–π, —ñ–º—É–Ω—ñ—Ç–µ—Ç —Ç–∞ –∑–∞–≥–∞–ª—å–Ω–µ —Å–∞–º–æ–ø–æ—á—É—Ç—Ç—è.",
                practices: ["–ü—Ä–æ–±—ñ–æ—Ç–∏–∫–∏", "–ö–ª—ñ—Ç–∫–æ–≤–∏–Ω–∞ —â–æ–¥–Ω—è", "–í—ñ–¥–º–æ–≤–∞ –≤—ñ–¥ —Å–æ–ª–æ–¥–∫–æ–≥–æ", "–Ø–∫—ñ—Å–Ω–∞ –≤–æ–¥–∞"]
            },
            rectal_parasites: {
                title: "üßª –ó–∞–¥–Ω—ñ–π –ø—Ä–æ—Ö—ñ–¥ —Ç–∞ –ø–∞—Ä–∞–∑–∏—Ç–∏ - —ñ–Ω—Ç–∏–º–Ω–µ –∑–¥–æ—Ä–æ–≤'—è",
                text: "–ó–¥–æ—Ä–æ–≤'—è –∑–∞–¥–Ω—å–æ–≥–æ –ø—Ä–æ—Ö–æ–¥—É —Ç–∞ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø–∞—Ä–∞–∑–∏—Ç—ñ–≤ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤—ñ –¥–ª—è —è–∫–æ—Å—Ç—ñ –∂–∏—Ç—Ç—è. –ß–∞—Å—Ç–µ —Å–∏–¥—ñ–Ω–Ω—è –∑ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º ‚Üí –∑–∞—Å—Ç—ñ–π –∫—Ä–æ–≤—ñ ‚Üí –≥–µ–º–æ—Ä–æ–π. –ü–∞—Ä–∞–∑–∏—Ç–∏ ‚Üí –ø–æ–≥–∞–Ω–µ –∑–∞—Å–≤–æ—î–Ω–Ω—è –ø–æ–∂–∏–≤–Ω–∏—Ö —Ä–µ—á–æ–≤–∏–Ω ‚Üí –≤–∏—Å–Ω–∞–∂–µ–Ω–Ω—è.",
                practices: ["–ë—ñ–¥–µ –∑–∞–º—ñ—Å—Ç—å —Ç—É–∞–ª–µ—Ç–Ω–æ–≥–æ –ø–∞–ø–µ—Ä—É", "–û–±–º–µ–∂–µ–Ω–Ω—è —á–∞—Å—É –≤ —Ç—É–∞–ª–µ—Ç—ñ", "–†–µ–≥—É–ª—è—Ä–Ω–∞ –¥–µ–≥–µ–ª—å–º—ñ–Ω—Ç–∏–∑–∞—Ü—ñ—è", "–ì—ñ–≥—ñ—î–Ω–∞ —Ä—É–∫ —Ç–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É"]
            }
        };

        // –§—É–Ω–∫—Ü—ñ—ó –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
        function goBack() {
            if (navigationHistory.length > 0) {
                const previousScreen = navigationHistory.pop();
                showScreen(previousScreen, false);
            } else {
                showScreen('menu-screen', false);
            }
        }

        function showScreen(screenId, addToHistory = true) {
            if (addToHistory && currentScreen !== 'menu') {
                navigationHistory.push(currentScreen + '-screen');
            }
            
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.classList.remove('hidden');
            }
            
            currentScreen = screenId.replace('-screen', '');
            
            // –ü–æ–∫–∞–∑–∞—Ç–∏/—Å—Ö–æ–≤–∞—Ç–∏ –∫–Ω–æ–ø–∫—É –Ω–∞–∑–∞–¥
            const backButton = document.getElementById('backButton');
            if (currentScreen === 'menu') {
                backButton.classList.add('hidden');
            } else {
                backButton.classList.remove('hidden');
            }
            
            setTimeout(() => scrollToTop(false), 100);
        }

        function scrollToTop(smooth = true) {
            if (smooth) {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            } else {
                window.scrollTo(0, 0);
            }
        }

        function handleMenuClick(menuId) {
            switch(menuId) {
                case 'test':
                    if (hasCompletedTest() && !canRetakeTest()) {
                        showRetakeWarning();
                    } else {
                        startTest();
                    }
                    break;
                case 'cabinet':
                    if (hasCompletedTest()) {
                        showMyCabinet();
                    } else {
                        alert('–°–ø–æ—á–∞—Ç–∫—É –ø—Ä–æ–π–¥—ñ—Ç—å —Ç–µ—Å—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É!');
                    }
                    break;
                case 'diet':
                    showDietSection();
                    break;
                case 'pharma':
                    showPharmaSection();
                    break;
                case 'consultation':
                    showConsultationSection();
                    break;
                default:
                    showComingSoon(menuId);
            }
        }

        function startTest() {
            showScreen('profile-screen');
        }

        function startTestQuestions() {
            userProfile = {
                name: document.getElementById('userName').value,
                age: document.getElementById('userAge').value,
                gender: document.getElementById('userGender').value,
                bodyType: document.getElementById('userBodyType').value,
                height: document.getElementById('userHeight').value,
                weight: document.getElementById('userWeight').value
            };

            if (!userProfile.name || !userProfile.age || !userProfile.gender || 
                !userProfile.bodyType || !userProfile.height || !userProfile.weight) {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –ø–æ–ª—è!');
                return;
            }

            currentBlock = 0;
            answers = {};
            showScreen('test-screen');
            showTestBlock();
        }

        function getAvailableBlocks() {
            const blocks = [];
            
            Object.entries(healthBlocks).forEach(([key, block]) => {
                if (block.genderSpecific) {
                    if (block.genderSpecific === userProfile.gender) {
                        blocks.push([key, block]);
                    }
                } else {
                    blocks.push([key, block]);
                }
            });
            
            return blocks;
        }

        function showTestBlock() {
            const availableBlocks = getAvailableBlocks();
            
            if (currentBlock >= availableBlocks.length) {
                showResults();
                return;
            }

            const [blockKey, blockData] = availableBlocks[currentBlock];
            
            const progress = ((currentBlock + 1) / availableBlocks.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `üìç –ü—Ä–æ–≥—Ä–µ—Å: ${currentBlock + 1}/${availableBlocks.length}`;
            
            document.getElementById('blockTitle').textContent = blockData.title;
            document.getElementById('blockDescription').textContent = blockData.description;
            
            const filteredQuestions = blockData.questions.filter(q => 
                !q.genderSpecific || q.genderSpecific === userProfile.gender
            );
            
            const questionsContainer = document.getElementById('questionsContainer');
            questionsContainer.innerHTML = '';
            
            filteredQuestions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-block';
                
                let optionsHTML = '';
                
                if (question.type === 'multiple_choice') {
                    optionsHTML = question.options.map(option => `
                        <button class="answer-button" onclick="selectAnswer('${question.id}', ${option.score})" 
                                data-question="${question.id}" data-value="${option.score}">
                            ${option.text}
                        </button>
                    `).join('');
                } else if (question.type === 'multiple_select') {
                    optionsHTML = question.options.map(option => `
                        <label class="checkbox-option">
                            <input type="checkbox" value="${option.value}" 
                                   onchange="handleMultipleSelect('${question.id}', '${option.value}', this.checked)">
                            <span>${option.text}</span>
                        </label>
                    `).join('');
                } else {
                    optionsHTML = `
                        <button class="answer-button" onclick="selectAnswer('${question.id}', 0)" 
                                data-question="${question.id}" data-value="0">–¢–∞–∫</button>
                        <button class="answer-button" onclick="selectAnswer('${question.id}', 1)" 
                                data-question="${question.id}" data-value="1">–Ü–Ω–∫–æ–ª–∏</button>
                        <button class="answer-button" onclick="selectAnswer('${question.id}', 2)" 
                                data-question="${question.id}" data-value="2">–ù—ñ</button>
                    `;
                }
                
                questionDiv.innerHTML = `
                    <div class="question-counter">–ü–∏—Ç–∞–Ω–Ω—è ${index + 1}/${filteredQuestions.length}</div>
                    <p class="question-text">${question.text}</p>
                    <div class="answer-options">${optionsHTML}</div>
                `;
                questionsContainer.appendChild(questionDiv);
            });
            
            const nextButton = document.getElementById('nextButton');
            nextButton.textContent = currentBlock === availableBlocks.length - 1 ? '–ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Ç–µ—Å—Ç üéØ' : '–î–∞–ª—ñ ‚û°Ô∏è';
            nextButton.disabled = true;
            
            checkAllAnswered();
        }

        function selectAnswer(questionId, value) {
            answers[questionId] = value;
            
            const buttons = document.querySelectorAll(`[data-question="${questionId}"]`);
            buttons.forEach(btn => btn.classList.remove('selected'));
            
            const selectedButton = document.querySelector(`[data-question="${questionId}"][data-value="${value}"]`);
            if (selectedButton) {
                selectedButton.classList.add('selected');
            }
            
            checkAllAnswered();
        }

        function handleMultipleSelect(questionId, value, checked) {
            if (!answers[questionId]) {
                answers[questionId] = [];
            }
            
            if (value === 'none') {
                answers[questionId] = checked ? ['none'] : [];
                const otherCheckboxes = document.querySelectorAll(`input[type="checkbox"]:not([value="none"])`);
                otherCheckboxes.forEach(cb => cb.checked = false);
            } else {
                if (checked) {
                    answers[questionId] = answers[questionId].filter(v => v !== 'none').concat(value);
                } else {
                    answers[questionId] = answers[questionId].filter(v => v !== value);
                }
                const noneCheckbox = document.querySelector(`input[value="none"]`);
                if (noneCheckbox) noneCheckbox.checked = false;
            }
            
            checkAllAnswered();
        }

        function checkAllAnswered() {
            const availableBlocks = getAvailableBlocks();
            const [blockKey, blockData] = availableBlocks[currentBlock];
            
            const filteredQuestions = blockData.questions.filter(q => 
                !q.genderSpecific || q.genderSpecific === userProfile.gender
            );
            
            const allAnswered = filteredQuestions.every(q => {
                if (q.type === 'multiple_select') {
                    return answers[q.id] && answers[q.id].length > 0;
                }
                return answers[q.id] !== undefined;
            });
            
            document.getElementById('nextButton').disabled = !allAnswered;
        }

        function showProcessingMessage(message, duration = 2000) {
            return new Promise((resolve) => {
                scrollToTop();
                
                const overlay = document.createElement('div');
                overlay.className = 'processing-overlay';
                overlay.innerHTML = `
                    <div class="processing-card">
                        <div class="processing-spinner"></div>
                        <p class="processing-text">${message}</p>
                        <div class="processing-dots">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(overlay);
                
                setTimeout(() => {
                    overlay.classList.add('visible');
                }, 100);
                
                setTimeout(() => {
                    overlay.classList.remove('visible');
                    setTimeout(() => {
                        if (overlay.parentNode) {
                            overlay.parentNode.removeChild(overlay);
                        }
                        resolve();
                    }, 300);
                }, duration);
            });
        }

        async function nextBlockWithProcessing() {
            scrollToTop();
            
            const processingMsgs = ['üß† –ê–Ω–∞–ª—ñ–∑—É—é –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ...', 'üìä –û–±—Ä–æ–±–ª—è—é –¥–∞–Ω—ñ...'];
            for (let i = 0; i < processingMsgs.length; i++) {
                await showProcessingMessage(processingMsgs[i], 800);
                if (i < processingMsgs.length - 1) {
                    await new Promise(r => setTimeout(r, 150));
                }
            }
            
            currentBlock++;
            
            if (currentBlock >= getAvailableBlocks().length) {
                const finalMessages = ['üìä –ó–∞–≤–µ—Ä—à—É—é –∞–Ω–∞–ª—ñ–∑...', 'üéØ –§–æ—Ä–º—É—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏...'];
                for (let i = 0; i < finalMessages.length; i++) {
                    await showProcessingMessage(finalMessages[i], 1000);
                    if (i < finalMessages.length - 1) {
                        await new Promise(r => setTimeout(r, 150));
                    }
                }
                showResults();
            } else {
                showTestBlock();
                setTimeout(() => scrollToTop(), 300);
            }
        }

        function showResults() {
            showScreen('results-screen');
            scrollToTop(false);
            calculateAndDisplayResults();
        }

        function calculateAndDisplayResults() {
            const results = {};
            const availableBlocks = getAvailableBlocks();
            
            availableBlocks.forEach(([key, data]) => {
                let score = 0;
                let maxScore = 0;
                
                const filteredQuestions = data.questions.filter(q => 
                    !q.genderSpecific || q.genderSpecific === userProfile.gender
                );
                
                filteredQuestions.forEach(q => {
                    if (q.type === 'multiple_select') {
                        maxScore += 2;
                        const selectedValues = answers[q.id] || [];
                        score += (selectedValues.length === 0 || selectedValues.includes('none')) ? 2 : 0;
                    } else {
                        maxScore += 2;
                        score += answers[q.id] || 0;
                    }
                });
                
                const percentage = Math.round((score / maxScore) * 100);
                
                results[key] = {
                    score,
                    maxScore,
                    percentage: Math.min(percentage, 85),
                    ...data
                };
            });

            const bmi = userProfile.weight && userProfile.height 
                ? (userProfile.weight / Math.pow(userProfile.height / 100, 2)).toFixed(1)
                : null;

            const userInfoHTML = `
                <h3>üë§ ${userProfile.name}</h3>
                <p>–í—ñ–∫: ${userProfile.age} | –°—Ç–∞—Ç—å: ${userProfile.gender === 'male' ? '–ß–æ–ª–æ–≤—ñ–∫' : '–ñ—ñ–Ω–∫–∞'}</p>
                ${bmi ? `<p>–Ü–ú–¢: ${bmi} (${getBMICategory(bmi)})</p>` : ''}
            `;
            document.getElementById('userInfoResults').innerHTML = userInfoHTML;

            let allResultsHTML = '<h3>üìä –î–µ—Ç–∞–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏:</h3>';
            
            Object.entries(results).forEach(([key, result]) => {
                const status = getStatusColor(result.percentage);
                allResultsHTML += `
                    <div class="result-item">
                        <div class="result-header">
                            <span class="result-name">${result.emoji} ${result.name}</span>
                            <span class="result-percentage ${status}">${Math.round(result.percentage)}%</span>
                        </div>
                        <div class="score-bar-small">
                            <div class="score-fill ${status}" style="width: ${result.percentage}%"></div>
                        </div>
                        ${result.percentage < 75 ? `
                        <div class="selling-text">
                            ${getSystemSellingText(key) ? `
                                <h5>${getSystemSellingText(key).title}</h5>
                                <p>${getSystemSellingText(key).text}</p>
                                <div class="basic-practices">
                                    <strong>üìã –ë–∞–∑–æ–≤—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏:</strong>
                                    <ul>
                                        ${getSystemSellingText(key).practices.map(practice => `<li>${practice}</li>`).join('')}
                                    </ul>
                                </div>
                            ` : ''}
                            <div class="upgrade-cta">
                                <p><strong>üíé –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —Ç–∞ —Å—Ç–µ–∫–∏ –¥–æ–±–∞–≤–æ–∫ —á–µ–∫–∞—é—Ç—å –≤ —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó</strong></p>
                                <button onclick="showUpgradeOffer()" class="upgrade-cta-btn">
                                    –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ ${result.name}
                                </button>
                            </div>
                        </div>
                        ` : ''}
                    </div>
                `;
            });

            // –î–æ–¥–∞—î–º–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—é –ì–ó–¢ –¥–ª—è —á–æ–ª–æ–≤—ñ–∫—ñ–≤ 45+
            if (userProfile.gender === 'male' && parseInt(userProfile.age?.split('-')[0] || '25') >= 45) {
                allResultsHTML += `
                    <div class="result-item" style="border-left: 4px solid #9c27b0;">
                        <div class="result-header">
                            <span class="result-name">üß¨ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è: –ì–ó–¢</span>
                            <span class="result-percentage warning">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</span>
                        </div>
                        <div class="selling-text">
                            <h5>üß¨ –ì–ó–¢ - –ì–æ—Ä–º–æ–Ω–æ–∑–∞–º—ñ—Å–Ω–∞ —Ç–µ—Ä–∞–ø—ñ—è</h5>
                            <p>–ó –≤—ñ–∫–æ–º –æ—Ä–≥–∞–Ω—ñ–∑–º –ø—Ä–∏—Ä–æ–¥–Ω–æ –∑–Ω–∏–∂—É—î –≤–∏—Ä–æ–±–ª–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω—É. –ü—ñ—Å–ª—è 45 —Ä–æ–∫—ñ–≤ –±–∞–≥–∞—Ç–æ —á–æ–ª–æ–≤—ñ–∫—ñ–≤ –≤—ñ–¥—á—É–≤–∞—é—Ç—å: ‚Üì–ª—ñ–±—ñ–¥–æ, ‚Üì–µ–Ω–µ—Ä–≥—ñ—é, ‚Üì–º'—è–∑–æ–≤—É –º–∞—Å—É, ‚Üë–∂–∏—Ä —É –∑–æ–Ω—ñ –∂–∏–≤–æ—Ç–∞.</p>
                            <div class="basic-practices">
                                <strong>‚úÖ –©–æ –¥–∞—î –ì–ó–¢:</strong>
                                <ul>
                                    <li>–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –µ–Ω–µ—Ä–≥—ñ—ó —Ç–∞ –º–æ—Ç–∏–≤–∞—Ü—ñ—ó</li>
                                    <li>–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è —Å–µ–∫—Å—É–∞–ª—å–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó</li>
                                    <li>–ù–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–º–ø–æ–∑–∏—Ü—ñ—ó —Ç—ñ–ª–∞</li>
                                    <li>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫—ñ—Å—Ç–∫–æ–≤–æ—ó —â—ñ–ª—å–Ω–æ—Å—Ç—ñ</li>
                                </ul>
                            </div>
                            <div class="upgrade-cta">
                                <p><strong>üíé –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è –∑ –ø—ñ–¥–±–æ—Ä—É –ì–ó–¢</strong></p>
                                <a href="https://t.me/vladyslav_kravchukk?text=–•–æ—á—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é —â–æ–¥–æ –ì–ó–¢" target="_blank" class="upgrade-cta-btn">
                                    –ó–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é
                                </a>
                            </div>
                        </div>
                    </div>
                `;
            }

            document.getElementById('allResults').innerHTML = allResultsHTML;
            
            saveTestResults(userProfile, answers, results, []);
        }

        function getBMICategory(bmi) {
            if (bmi < 18.5) return '–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—è –≤–∞–≥–∞';
            if (bmi < 25) return '–ù–æ—Ä–º–∞–ª—å–Ω–∞ –≤–∞–≥–∞';
            if (bmi < 30) return '–ù–∞–¥–º—ñ—Ä–Ω–∞ –≤–∞–≥–∞';
            return '–û–∂–∏—Ä—ñ–Ω–Ω—è';
        }

        function getStatusColor(percentage) {
            if (percentage >= 75) return 'good';
            if (percentage >= 50) return 'warning';
            return 'danger';
        }

        function getSystemSellingText(systemKey) {
            return systemSellingTexts[systemKey] || null;
        }

        // –ö–ª–∞—Å –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
        class TestResults {
            constructor(userProfile, answers, results, warnings) {
                this.id = Date.now().toString();
                this.completionDate = new Date().toISOString();
                this.userProfile = { ...userProfile };
                this.answers = { ...answers };
                this.results = { ...results };
                this.warnings = warnings || [];
            }
        }

        function saveTestResults(userProfile, answers, results, warnings) {
            userTestResults = new TestResults(userProfile, answers, results, warnings);
            testCompletionDate = new Date();
            return userTestResults;
        }

        function hasCompletedTest() {
            return userTestResults !== null;
        }

        function canRetakeTest() {
            if (!testCompletionDate) return true;
            const daysSinceTest = (Date.now() - testCompletionDate.getTime()) / (1000 * 60 * 60 * 24);
            return daysSinceTest >= 30;
        }

        function showRetakeWarning() {
            alert('–í–∏ –≤–∂–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —Ç–µ—Å—Ç –º–µ–Ω—à–µ –º—ñ—Å—è—Ü—è —Ç–æ–º—É. –ù–∞—Å—Ç—É–ø–Ω–∏–π —Ç–µ—Å—Ç –º–æ–∂–Ω–∞ –±—É–¥–µ –ø—Ä–æ–π—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ –¥–ª—è –±—ñ–ª—å—à —Ç–æ—á–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.');
        }

        function showMyCabinet() {
            if (!hasCompletedTest()) {
                alert('–°–ø–æ—á–∞—Ç–∫—É –ø—Ä–æ–π–¥—ñ—Ç—å —Ç–µ—Å—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É!');
                return;
            }
            
            const cabinetHTML = `
                <div class="cabinet-container">
                    <h2>üë§ –ú—ñ–π –∫–∞–±—ñ–Ω–µ—Ç</h2>
                    <p>–¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω–æ: ${formatDate(userTestResults.completionDate)}</p>
                    <p>–í–∞—à—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ —Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É.</p>
                    
                    <div class="course-card">
                        <h4>üíä –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ —Å—Ç–µ–∫–∏ –¥–æ–±–∞–≤–æ–∫</h4>
                        <p>–ù–∞ –æ—Å–Ω–æ–≤—ñ –≤–∞—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —Ç–µ—Å—Ç—É</p>
                        <ul>
                            <li>–Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏–π –ø—ñ–¥–±—ñ—Ä –¥–æ–±–∞–≤–æ–∫</li>
                            <li>–°—Ö–µ–º–∏ –ø—Ä–∏–π–æ–º—É —Ç–∞ –¥–æ–∑—É–≤–∞–Ω–Ω—è</li>
                            <li>–ö–æ—Ä–µ–ª—è—Ü—ñ—ó –∑ –≤–∞—à–∏–º–∏ –ø–æ–∫–∞–∑–Ω–∏–∫–∞–º–∏</li>
                        </ul>
                        <button onclick="showPersonalizedSupplements()" class="continue-button">
                            –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –º–æ—ó —Å—Ç–µ–∫–∏
                        </button>
                    </div>
                    
                    <button onclick="showUpgradeOffer()" class="continue-button">
                        üíé –û—Ç—Ä–∏–º–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑
                    </button>
                    <button onclick="backToMenu()" class="back-to-menu">
                        üè† –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –º–µ–Ω—é
                    </button>
                </div>
            `;
            
            showCustomScreen(cabinetHTML);
        }

        function showPersonalizedSupplements() {
            alert('–ü–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Å—Ç–µ–∫–∏ –¥–æ–±–∞–≤–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ñ –≤ —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó. –ó–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—å –¥–æ —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞ –¥–ª—è —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ–≥–æ –ø—ñ–¥–±–æ—Ä—É.');
        }

        function formatDate(isoString) {
            const date = new Date(isoString);
            return date.toLocaleDateString('uk-UA');
        }

        function showDietSection() {
            showComingSoon('–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ –¥—ñ—î—Ç–∏');
        }

        function showPharmaSection() {
            const pharmaHTML = `
                <div class="pharma-section">
                    <h2>üíäüíâ –§–∞—Ä–º–∞–∫–æ–ª–æ–≥—ñ—è</h2>
                    
                    <div class="pharma-warning">
                        <h3>‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ!</h3>
                        <p>–í—Å—ñ —Ñ–∞—Ä–º–∞–∫–æ–ª–æ–≥—ñ—á–Ω—ñ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø—Ä–∏–∑–Ω–∞—á–∞—Ç–∏—Å—è —Ç—ñ–ª—å–∫–∏ –ª—ñ–∫–∞—Ä–µ–º –ø—ñ—Å–ª—è –æ–±—Å—Ç–µ–∂–µ–Ω–Ω—è!</p>
                    </div>
                    
                    <div class="course-card" onclick="showSteroidCourses()">
                        <h4>üíâ –°—Ç–µ—Ä–æ—ó–¥–Ω—ñ –∫—É—Ä—Å–∏</h4>
                        <p>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –≤–∏–∫–ª—é—á–Ω–æ –¥–ª—è –æ–∑–Ω–∞–π–æ–º–ª–µ–Ω–Ω—è</p>
                        <ul>
                            <li>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –ø—ñ–¥–±—ñ—Ä –∫—É—Ä—Å—É</li>
                            <li>–ö–∞—Ç–∞–ª–æ–≥ –≥–æ—Ç–æ–≤–∏—Ö –∫—É—Ä—Å—ñ–≤</li>
                            <li>–ë–µ–∑–ø–µ–∫–∞ —Ç–∞ –ü–ö–¢</li>
                        </ul>
                        <div class="course-price">–≤—ñ–¥ 900 –≥—Ä–Ω</div>
                    </div>
                    
                    <div class="course-card" onclick="showHRTInfo()">
                        <h4>üß¨ –ì–ó–¢ - –ì–æ—Ä–º–æ–Ω–æ–∑–∞–º—ñ—Å–Ω–∞ —Ç–µ—Ä–∞–ø—ñ—è</h4>
                        <p>–î–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏—Ä–æ–¥–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è –≥–æ—Ä–º–æ–Ω—ñ–≤</p>
                        <ul>
                            <li>–ü—Ä–æ—Ç–æ–∫–æ–ª–∏ —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω—É</li>
                            <li>–ú–µ–¥–∏—á–Ω–∏–π —Å—É–ø—Ä–æ–≤—ñ–¥</li>
                            <li>–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤</li>
                        </ul>
                        <div class="course-price">–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è 799 –≥—Ä–Ω</div>
                    </div>
                    
                    <button onclick="backToMenu()" class="back-to-menu">
                        üè† –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –º–µ–Ω—é
                    </button>
                </div>
            `;
            
            showCustomScreen(pharmaHTML);
        }

        function showSteroidCourses() {
            const coursesHTML = `
                <div class="steroid-courses-section">
                    <h2>üíâ –°—Ç–µ—Ä–æ—ó–¥–Ω—ñ –∫—É—Ä—Å–∏</h2>
                    
                    <div class="pharma-warning">
                        <h3>‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–õ–ò–í–û!</h3>
                        <p>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –≤–∏–∫–ª—é—á–Ω–æ –¥–ª—è –æ–∑–Ω–∞–π–æ–º–ª–µ–Ω–Ω—è! –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∞–Ω–∞–±–æ–ª—ñ—á–Ω–∏—Ö —Å—Ç–µ—Ä–æ—ó–¥—ñ–≤ –±–µ–∑ –º–µ–¥–∏—á–Ω–æ–≥–æ –Ω–∞–≥–ª—è–¥—É –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ –¥–ª—è –∑–¥–æ—Ä–æ–≤'—è!</p>
                    </div>
                    
                    <div class="course-selection">
                        <h3>üéØ –û–±–µ—Ä—ñ—Ç—å –≤–∞—Ä—ñ–∞–Ω—Ç:</h3>
                        
                        <div class="course-card" onclick="showCourseQuestionnaire()">
                            <h4>üìã –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –ø—ñ–¥–±—ñ—Ä –∫—É—Ä—Å—É</h4>
                            <p>–í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ–≥–æ –ø—ñ–¥–±–æ—Ä—É</p>
                            <small>–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è –Ω–æ–≤–∞—á–∫—ñ–≤</small>
                        </div>
                        
                        <div class="course-card" onclick="showAllCourses()">
                            <h4>üìñ –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –∫—É—Ä—Å–∏</h4>
                            <p>–ö–∞—Ç–∞–ª–æ–≥ –≥–æ—Ç–æ–≤–∏—Ö –∫—É—Ä—Å—ñ–≤ –∑ –æ–ø–∏—Å–∞–º–∏</p>
                            <small>–î–ª—è –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</small>
                        </div>
                    </div>
                    
                    <div class="upgrade-cta">
                        <p>üí¨ –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—ñ–¥–±–æ—Ä—É —Ç–∞ —Å—É–ø—Ä–æ–≤–æ–¥—É:</p>
                        <a href="https://t.me/vladyslav_kravchukk" target="_blank" class="upgrade-cta-btn">
                            üì± –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞
                        </a>
                    </div>
                    
                    <button onclick="showPharmaSection()" class="back-to-menu">
                        ‚Üê –ù–∞–∑–∞–¥ –¥–æ —Ñ–∞—Ä–º–∞–∫–æ–ª–æ–≥—ñ—ó
                    </button>
                </div>
            `;
            
            showCustomScreen(coursesHTML);
        }

        function showCourseQuestionnaire() {
            let currentQuestionIndex = 0;
            let courseAnswers = {};
            
            const questions = [
                {
                    id: 'age',
                    title: '–í–∞—à –≤—ñ–∫:',
                    options: [
                        '18-20 —Ä–æ–∫—ñ–≤ (–º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –¥–æ–∑–∏)',
                        '21-25 —Ä–æ–∫—ñ–≤ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –¥–æ–∑–∏)',
                        '26-35 —Ä–æ–∫—ñ–≤ (–ø–æ–≤–Ω—ñ –¥–æ–∑–∏)',
                        '36-40 —Ä–æ–∫—ñ–≤ (–æ–±–µ—Ä–µ–∂–Ω—ñ –¥–æ–∑–∏)',
                        '40+ —Ä–æ–∫—ñ–≤ (—Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ—Ç–æ–∫–æ–ª–∏)'
                    ]
                },
                {
                    id: 'experience',
                    title: '–î–æ—Å–≤—ñ–¥ –∑ –ê–ê–°:',
                    options: [
                        '0 (–ø–µ—Ä—à–∏–π –∫—É—Ä—Å)',
                        '1-2 –∫—É—Ä—Å–∏',
                        '3-5 –∫—É—Ä—Å—ñ–≤',
                        '–ë—ñ–ª—å—à–µ 5 –∫—É—Ä—Å—ñ–≤'
                    ]
                },
                {
                    id: 'health',
                    title: '–°—Ç–∞–Ω –∑–¥–æ—Ä–æ–≤\'—è:',
                    options: [
                        '–ê–ª–æ–ø–µ—Ü—ñ—è/–≤–∏–ø–∞–¥—ñ–Ω–Ω—è –≤–æ–ª–æ—Å—Å—è',
                        '–ü—Ä–æ–±–ª–µ–º–∏ –∑ –ø—Ä–æ—Å—Ç–∞—Ç–æ—é',
                        '–ü—Ä–æ–±–ª–µ–º–∏ –∑ –ø–µ—á—ñ–Ω–∫–æ—é',
                        '–¢—Ä–∞–≤–º–∏ —Å—É–≥–ª–æ–±—ñ–≤',
                        '–ù–µ–º–∞—î –æ–±–º–µ–∂–µ–Ω—å'
                    ]
                },
                {
                    id: 'goal',
                    title: '–ú–µ—Ç–∞ –∫—É—Ä—Å—É:',
                    options: [
                        '–ù–∞–±—ñ—Ä –º\'—è–∑–æ–≤–æ—ó –º–∞—Å–∏',
                        '–°—É—à–∫–∞/—Ä–µ–ª—å—î—Ñ',
                        '–ó–±—ñ–ª—å—à–µ–Ω–Ω—è —Å–∏–ª–∏',
                        '–°–ø–æ—Ä—Ç–∏–≤–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏'
                    ]
                }
            ];
            
            function showQuestion(index) {
                if (index >= questions.length) {
                    showCourseRecommendation();
                    return;
                }
                
                const question = questions[index];
                const questionnaireHTML = `
                    <div class="course-questionnaire-section">
                        <h2>üìã –ü—ñ–¥–±—ñ—Ä –∫—É—Ä—Å—É</h2>
                        <p>–ü–∏—Ç–∞–Ω–Ω—è ${index + 1} –∑ ${questions.length}</p>
                        
                        <div class="course-card">
                            <h4>${question.title}</h4>
                            <div class="questionnaire-options">
                                ${question.options.map((option, optIndex) => `
                                    <div class="questionnaire-option" onclick="selectCourseAnswer('${question.id}', '${option}', ${optIndex})">
                                        ${option}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <button onclick="showSteroidCourses()" class="back-to-menu">
                            ‚Üê –ù–∞–∑–∞–¥ –¥–æ –∫—É—Ä—Å—ñ–≤
                        </button>
                    </div>
                `;
                
                showCustomScreen(questionnaireHTML);
            }
            
            window.selectCourseAnswer = function(questionId, value, optionIndex) {
                courseAnswers[questionId] = value;
                
                const options = document.querySelectorAll('.questionnaire-option');
                options.forEach(opt => opt.classList.remove('selected'));
                if (options[optionIndex]) {
                    options[optionIndex].classList.add('selected');
                }
                
                setTimeout(() => {
                    currentQuestionIndex++;
                    showQuestion(currentQuestionIndex);
                }, 500);
            };
            
            function showCourseRecommendation() {
                let recommendedCourse = '';
                let price = '';
                let description = '';
                
                if (courseAnswers.experience === '0 (–ø–µ—Ä—à–∏–π –∫—É—Ä—Å)') {
                    recommendedCourse = 'ü•â –ü–µ—Ä—à–∏–π –∫—É—Ä—Å';
                    price = '1200-3000 –≥—Ä–Ω';
                    description = '–ë–µ–∑–ø–µ—á–Ω–∏–π —Å—Ç–∞—Ä—Ç –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º–∏ —Ä–∏–∑–∏–∫–∞–º–∏';
                } else if (courseAnswers.experience === '1-2 –∫—É—Ä—Å–∏') {
                    recommendedCourse = 'ü•à –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –∫—É—Ä—Å';
                    price = '3200-4000 –≥—Ä–Ω';
                    description = '–Ø–∫—ñ—Å–Ω–∏–π –Ω–∞–±—ñ—Ä –¥–ª—è –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏—Ö';
                } else {
                    recommendedCourse = 'ü•á –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∏–π –∫—É—Ä—Å';
                    price = '6500+ –≥—Ä–Ω';
                    description = '–î–ª—è –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª—ñ–≤';
                }
                
                const resultHTML = `
                    <div class="course-recommendation">
                        <h2>üéØ –í–∞—à–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è</h2>
                        
                        <div class="course-card">
                            <h4>${recommendedCourse}</h4>
                            <p>${description}</p>
                            <div class="course-price">${price}</div>
                        </div>
                        
                        <div class="upgrade-cta">
                            <p><strong>üíé –î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ö–µ–º–∞ –∫—É—Ä—Å—É –≤–∫–ª—é—á–∞—î:</strong></p>
                            <ul style="text-align: left; color: white;">
                                <li>–¢–æ—á–Ω—ñ –¥–æ–∑—É–≤–∞–Ω–Ω—è —Ç–∞ –≥—Ä–∞—Ñ—ñ–∫</li>
                                <li>–ü–ö–¢ –ø—Ä–æ—Ç–æ–∫–æ–ª</li>
                                <li>–ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –∞–Ω–∞–ª—ñ–∑–∏</li>
                                <li>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–µ—á—ñ–Ω–∫–∏</li>
                                <li>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞</li>
                            </ul>
                            <a href="https://t.me/vladyslav_kravchukk?text=–•–æ—á—É –¥–µ—Ç–∞–ª—å–Ω—É —Å—Ö–µ–º—É –∫—É—Ä—Å—É" target="_blank" class="upgrade-cta-btn">
                                –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ–≤–Ω—É —Å—Ö–µ–º—É
                            </a>
                        </div>
                        
                        <button onclick="showAllCourses()" class="secondary-button">
                            üìñ –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —ñ–Ω—à—ñ –∫—É—Ä—Å–∏
                        </button>
                        
                        <button onclick="showSteroidCourses()" class="back-to-menu">
                            ‚Üê –ù–∞–∑–∞–¥
                        </button>
                    </div>
                `;
                
                showCustomScreen(resultHTML);
            }
            
            showQuestion(0);
        }

        function showAllCourses() {
            const courses = [
                {
                    name: 'ü•â –ï–ö–û–ù–û–ú: –ö–æ—Ä–æ—Ç–∫–∏–π –∫—É—Ä—Å (4 —Ç–∏–∂–Ω—ñ)',
                    price: '900-1500 –≥—Ä–Ω',
                    description: '–¢—É—Ä—ñ–Ω–∞–±–æ–ª –∞–±–æ –û–∫—Å–∞–Ω–∞–¥—Ä–æ–ª–æ–Ω',
                    target: '–õ–µ–≥–∫–∏–π –Ω–∞–±—ñ—Ä, —à–≤–∏–¥–∫—ñ—Å—Ç—å-—Å–∏–ª–∞'
                },
                {
                    name: 'ü•à –°–¢–ê–ù–î–ê–†–¢: –¢–µ—Å—Ç + —Ç–∞–±–ª–µ—Ç–∫–∏ (8 —Ç–∏–∂–Ω—ñ–≤)',
                    price: '3200-4000 –≥—Ä–Ω',
                    description: '–¢–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω + –û–∫—Å–∞–Ω–∞–¥—Ä–æ–ª–æ–Ω',
                    target: '–Ø–∫—ñ—Å–Ω–∏–π –Ω–∞–±—ñ—Ä, —Å–∏–ª–∞'
                },
                {
                    name: 'ü•á –ü–†–ï–ú–Ü–£–ú: –°–∫–ª–∞–¥–Ω–∏–π –∫—É—Ä—Å (10-12 —Ç–∏–∂–Ω—ñ–≤)',
                    price: '6500-8000 –≥—Ä–Ω',
                    description: '–¢–µ—Å—Ç + –ú–∞—Å—Ç–µ—Ä–æ–Ω + –¢—É—Ä—ñ–Ω–∞–±–æ–ª',
                    target: '–ê–∫—Ç–∏–≤–Ω–∏–π –Ω–∞–±—ñ—Ä + —è–∫—ñ—Å—Ç—å'
                }
            ];
            
            const allCoursesHTML = `
                <div class="all-courses-section">
                    <h2>üìñ –ö–∞—Ç–∞–ª–æ–≥ –∫—É—Ä—Å—ñ–≤</h2>
                    
                    ${courses.map(course => `
                        <div class="course-card">
                            <h4>${course.name}</h4>
                            <p>${course.description}</p>
                            <div class="course-price">${course.price}</div>
                            <p><strong>–ú–µ—Ç–∞:</strong> ${course.target}</p>
                            <button onclick="orderCourse('${course.name}')" class="continue-button">
                                –î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ö–µ–º–∞
                            </button>
                        </div>
                    `).join('')}
                    
                    <button onclick="showCourseQuestionnaire()" class="secondary-button">
                        üìã –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –ø—ñ–¥–±—ñ—Ä
                    </button>
                    
                    <button onclick="showSteroidCourses()" class="back-to-menu">
                        ‚Üê –ù–∞–∑–∞–¥
                    </button>
                </div>
            `;
            
            showCustomScreen(allCoursesHTML);
        }

        function orderCourse(courseName) {
            const message = `–•–æ—á—É –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—É —Å—Ö–µ–º—É –∫—É—Ä—Å—É: ${courseName}`;
            window.open(`https://t.me/vladyslav_kravchukk?text=${encodeURIComponent(message)}`, '_blank');
        }

        function showHRTInfo() {
            const hrtHTML = `
                <div class="hrt-section">
                    <h2>üß¨ –ì–ó–¢ - –ì–æ—Ä–º–æ–Ω–æ–∑–∞–º—ñ—Å–Ω–∞ —Ç–µ—Ä–∞–ø—ñ—è</h2>
                    
                    <div class="course-card">
                        <h4>–©–æ —Ç–∞–∫–µ –ì–ó–¢?</h4>
                        <p>–ì–ó–¢-–¢–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω: –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ —á–æ–ª–æ–≤—ñ—á–æ—ó –Ω–æ—Ä–º–∏. –ó –≤—ñ–∫–æ–º –æ—Ä–≥–∞–Ω—ñ–∑–º –ø—Ä–∏—Ä–æ–¥–Ω–æ –∑–Ω–∏–∂—É—î –≤–∏—Ä–æ–±–ª–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω—É. –ü—ñ—Å–ª—è 40‚Äì45 —Ä–æ–∫—ñ–≤ –±–∞–≥–∞—Ç–æ —á–æ–ª–æ–≤—ñ–∫—ñ–≤ –≤—Ö–æ–¥—è—Ç—å —É —Å—Ç–∞–Ω –≥—ñ–ø–æ–≥–æ–Ω–∞–¥–∏–∑–º—É.</p>
                    </div>
                    
                    <div class="course-card">
                        <h4>üò∞ –°–∏–º–ø—Ç–æ–º–∏ –Ω–∏–∑—å–∫–æ–≥–æ —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω—É:</h4>
                        <ul>
                            <li>–ó–Ω–∏–∂—É—î—Ç—å—Å—è –ª—ñ–±—ñ–¥–æ</li>
                            <li>–ü–∞–¥–∞—î –µ–Ω–µ—Ä–≥—ñ—è</li>
                            <li>–ó–º–µ–Ω—à—É—î—Ç—å—Å—è –º'—è–∑–æ–≤–∞ –º–∞—Å–∞</li>
                            <li>–ó–±—ñ–ª—å—à—É—î—Ç—å—Å—è –∂–∏—Ä —É –∑–æ–Ω—ñ –∂–∏–≤–æ—Ç–∞</li>
                        </ul>
                    </div>
                    
                    <div class="course-card">
                        <h4>‚úÖ –©–æ –¥–∞—î –ì–ó–¢:</h4>
                        <ul>
                            <li>–†—ñ–≤–µ–Ω—å —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω—É –≤ –º–µ–∂–∞—Ö –º–æ–ª–æ–¥–æ—ó –Ω–æ—Ä–º–∏</li>
                            <li>–†—ñ—Å—Ç –º–æ—Ç–∏–≤–∞—Ü—ñ—ó, –Ω–∞—Å—Ç—Ä–æ—é</li>
                            <li>–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è —Å–µ–∫—Å—É–∞–ª—å–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó</li>
                            <li>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫—ñ—Å—Ç–∫–æ–≤–æ—ó —â—ñ–ª—å–Ω–æ—Å—Ç—ñ</li>
                        </ul>
                    </div>
                    
                    <div class="pharma-warning">
                        <h3>‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ!</h3>
                        <p>–ì–ó–¢ –ø—Ä–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ª—ñ–∫–∞—Ä–µ–º –ø—ñ—Å–ª—è –∞–Ω–∞–ª—ñ–∑—ñ–≤ –Ω–∞ –≥–æ—Ä–º–æ–Ω–∏. –¶–µ –Ω–µ "—Å—Ç–µ—Ä–æ—ó–¥–Ω–∏–π –∫—É—Ä—Å", –∞ –º–µ–¥–∏—á–Ω–∞ —Ç–µ—Ä–∞–ø—ñ—è!</p>
                    </div>
                    
                    <div class="upgrade-cta">
                        <p>üí¨ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è –∑ –ø—ñ–¥–±–æ—Ä—É –ì–ó–¢:</p>
                        <a href="https://t.me/vladyslav_kravchukk?text=–•–æ—á—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é —â–æ–¥–æ –ì–ó–¢" target="_blank" class="upgrade-cta-btn">
                            üì± –ó–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é
                        </a>
                    </div>
                    
                    <button onclick="showPharmaSection()" class="back-to-menu">
                        ‚Üê –ù–∞–∑–∞–¥ –¥–æ —Ñ–∞—Ä–º–∞–∫–æ–ª–æ–≥—ñ—ó
                    </button>
                </div>
            `;
            
            showCustomScreen(hrtHTML);
        }

        function showConsultationSection() {
            const consultationHTML = `
                <div class="consultation-section">
                    <h2>üë®‚Äç‚öïÔ∏è –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞</h2>
                    
                    <div class="course-card">
                        <h4>–í–ª–∞–¥–∏—Å–ª–∞–≤ –ö—Ä–∞–≤—á—É–∫</h4>
                        <p>–°–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç –∑ –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω–æ—ó –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó</p>
                    </div>
                    
                    <div class="course-card">
                        <h4>üìû –ë–∞–∑–æ–≤–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è - 799 –≥—Ä–Ω</h4>
                        <ul>
                            <li>–ê–Ω–∞–ª—ñ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —Ç–µ—Å—Ç—É</li>
                            <li>–Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó</li>
                            <li>–ü–ª–∞–Ω –æ–±—Å—Ç–µ–∂–µ–Ω—å</li>
                            <li>–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: 45 —Ö–≤–∏–ª–∏–Ω</li>
                        </ul>
                    </div>
                    
                    <div class="course-card">
                        <h4>üíé –†–æ–∑—à–∏—Ä–µ–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è - 1299 –≥—Ä–Ω</h4>
                        <ul>
                            <li>–î–µ—Ç–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –≤—Å—ñ—Ö —Å–∏—Å—Ç–µ–º</li>
                            <li>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω –Ω–∞ 3 –º—ñ—Å—è—Ü—ñ</li>
                            <li>–ü—ñ–¥–±—ñ—Ä –¥–æ–±–∞–≤–æ–∫ –∑ —Å—Ö–µ–º–∞–º–∏</li>
                            <li>–°—É–ø—Ä–æ–≤—ñ–¥ –ø—Ä–æ—Ç—è–≥–æ–º –º—ñ—Å—è—Ü—è</li>
                            <li>–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: 90 —Ö–≤–∏–ª–∏–Ω</li>
                        </ul>
                    </div>
                    
                    <a href="https://t.me/vladyslav_kravchukk" target="_blank" class="continue-button">
                        üì± –ù–∞–ø–∏—Å–∞—Ç–∏ –≤ Telegram
                    </a>
                    
                    <button onclick="backToMenu()" class="back-to-menu">
                        üè† –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –º–µ–Ω—é
                    </button>
                </div>
            `;
            
            showCustomScreen(consultationHTML);
        }

        function showUpgradeOffer() {
            const upgradeHTML = `
                <div class="upgrade-offer">
                    <h2>üöÄ –†–æ–∑—à–∏—Ä–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è PantelMed AI</h2>
                    
                    <div class="course-card">
                        <h4>üíé –ü–æ–≤–Ω–∏–π –ø–∞–∫–µ—Ç</h4>
                        <ul>
                            <li>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ —Å—Ç–µ–∫–∏ –¥–æ–±–∞–≤–æ–∫</li>
                            <li>–î–µ—Ç–∞–ª—å–Ω—ñ —Å—Ö–µ–º–∏ –ø—Ä–∏–π–æ–º—É</li>
                            <li>–í–∏–ª–∫–∏ –≤–∑–∞—î–º–æ–¥—ñ—ó —Å–∏—Å—Ç–µ–º</li>
                            <li>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞</li>
                            <li>–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—É</li>
                        </ul>
                        <div class="course-price">1299 –≥—Ä–Ω</div>
                    </div>
                    
                    <a href="https://t.me/vladyslav_kravchukk?text=–•–æ—á—É –∑–∞–º–æ–≤–∏—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω—É –≤–µ—Ä—Å—ñ—é PantelMed AI" 
                       target="_blank" class="continue-button">
                        üí≥ –ó–∞–º–æ–≤–∏—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω—É –≤–µ—Ä—Å—ñ—é
                    </a>
                    
                    <button onclick="backToMenu()" class="secondary-button">
                        ‚Üê –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó
                    </button>
                </div>
            `;
            
            showCustomScreen(upgradeHTML);
        }

        function showCustomScreen(htmlContent) {
            let customScreen = document.getElementById('custom-screen');
            if (!customScreen) {
                customScreen = document.createElement('div');
                customScreen.id = 'custom-screen';
                customScreen.className = 'screen hidden';
                document.querySelector('.app').appendChild(customScreen);
            }
            
            customScreen.innerHTML = htmlContent;
            showScreen('custom-screen');
        }

        function showComingSoon(featureName) {
            const comingSoonHTML = `
                <div class="coming-soon-section">
                    <h2>üöß ${featureName}</h2>
                    <div class="coming-soon-content">
                        <div class="construction-icon">‚öôÔ∏è</div>
                        <h3>–†–æ–∑–¥—ñ–ª –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ</h3>
                        <p>–ú–∏ –ø—Ä–∞—Ü—é—î–º–æ –Ω–∞–¥ —Ü—ñ—î—é —Ñ—É–Ω–∫—Ü—ñ—î—é. –ù–µ–∑–∞–±–∞—Ä–æ–º –≤–æ–Ω–∞ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∞!</p>
                        
                        <a href="https://t.me/vladyslav_kravchukk" target="_blank" class="continue-button">
                            üîî –ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
                        </a>
                    </div>
                    
                    <button onclick="backToMenu()" class="back-to-menu">
                        üè† –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –º–µ–Ω—é
                    </button>
                </div>
            `;
            
            showCustomScreen(comingSoonHTML);
        }

        function backToMenu() {
            showScreen('menu-screen', false);
            currentBlock = 0;
            answers = {};
            navigationHistory = [];
        }

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        document.addEventListener('DOMContentLoaded', function() {
            try {
                showScreen('menu-screen', false);
                
                if (tg && tg.initDataUnsafe?.user?.first_name) {
                    const nameInput = document.getElementById('userName');
                    if (nameInput) {
                        nameInput.value = tg.initDataUnsafe.user.first_name;
                    }
                }
            } catch (error) {
                console.log('Initialization error:', error);
            }
        });

        // –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ñ–æ—Ä–º–∏ –ø—Ä–æ—Ñ—ñ–ª—é
        document.addEventListener('input', function(e) {
            if (e.target.closest('#profile-screen')) {
                try {
                    const name = document.getElementById('userName')?.value || '';
                    const age = document.getElementById('userAge')?.value || '';
                    const gender = document.getElementById('userGender')?.value || '';
                    const bodyType = document.getElementById('userBodyType')?.value || '';
                    const height = document.getElementById('userHeight')?.value || '';
                    const weight = document.getElementById('userWeight')?.value || '';
                    
                    const allFilled = name && age && gender && bodyType && height && weight;
                    const continueBtn = document.querySelector('#profile-screen .continue-button');
                    if (continueBtn) {
                        continueBtn.disabled = !allFilled;
                    }
                } catch (error) {
                    console.log('Validation error:', error);
                }
            }
        });
    </script>
</body>
</html>
